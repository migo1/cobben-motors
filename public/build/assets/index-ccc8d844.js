import{M as E}from"./Vertical-a8e1a7bb.js";import{_ as w,r as S,o as r,c as n,a as t,w as p,v as k,t as u,b as L,d as C,O as x,F as f,l as y,z as N,T as V,u as D,i as F,j as U,A as P,e as g,f as c,k as T,m as j,n as A}from"./app-cfb6104e.js";const B={layout:"Vertical",setup(){const a=S({errors:null,submitdata:{search:null}});return{state:a,searchFun:async()=>{await x.get(route("roles.index"),a.submitdata,{preserveState:!0})}}}},W={class:"col-12"},q={class:"row"},O={class:"col-6"},z={class:"form-group"},G=t("div",{class:"col-6"},[t("div",{class:"form-group"},[t("button",{type:"submit",class:"btn btn-primary mr-1 control"}," Search ")])],-1),Y={key:0,class:"col-12"},H={class:"badge badge-light-danger mb-2 errorbadge"};function I(a,e,l,s,h,i){return r(),n("div",W,[t("form",{class:"form form-vertical",onSubmit:e[1]||(e[1]=C((...o)=>s.searchFun&&s.searchFun(...o),["prevent"]))},[t("div",q,[t("div",O,[t("div",z,[p(t("input",{type:"text",class:"form-control",placeholder:"Search by Name","onUpdate:modelValue":e[0]||(e[0]=o=>s.state.submitdata.search=o)},null,512),[[k,s.state.submitdata.search]])])]),G,s.state.errors!==null?(r(),n("div",Y,[t("span",H,u(s.state.errors),1)])):L("",!0)])],32)])}const J=w(B,[["render",I]]),K={props:["permissions"],setup(){const a=S({form:{name:"",permission:[]}});let e=()=>{var s=V(a.form);s.post(route("roles.store")),$("#large").modal("toggle"),l()},l=()=>{a.form={name:"",permission:[]}};return{state:a,saveFun:e,clearData:l}}},Q={class:"modal fade text-left",id:"large",tabindex:"-1",role:"dialog","aria-labelledby":"myModalLabel17","aria-hidden":"true"},X={class:"modal-dialog modal-dialog-centered modal-lg",role:"document"},Z={class:"modal-content"},tt={class:"modal-header"},et=t("h4",{class:"modal-title",id:"myModalLabel17"},"New Role",-1),st=t("span",{"aria-hidden":"true"},"×",-1),ot=[st],at={class:"modal-body"},lt={class:"row"},rt={class:"col-12"},nt={class:"form-group"},it=t("label",null,"Role Name",-1),dt={class:"col-12",style:{height:"60vh","overflow-y":"auto"}},ct={class:"form-group"},mt=t("strong",null,"Permission:",-1),_t=t("br",null,null,-1),ut={class:"list-group"},ht={class:"row"},pt={class:"col-3"},vt={class:"col-9 row"},bt=["value"],gt=t("div",{class:"col-12 mt-1"},[t("button",{type:"submit",class:"btn btn-primary mr-1"}," Save ")],-1);function ft(a,e,l,s,h,i){return r(),n("div",Q,[t("div",X,[t("div",Z,[t("div",tt,[et,t("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close",onClick:e[0]||(e[0]=o=>s.clearData())},ot)]),t("div",at,[t("form",{class:"form form-vertical",onSubmit:e[3]||(e[3]=C(o=>s.saveFun(),["prevent"]))},[t("div",lt,[t("div",rt,[t("div",nt,[it,p(t("input",{type:"text",class:"form-control",placeholder:"Name","onUpdate:modelValue":e[1]||(e[1]=o=>s.state.form.name=o),required:""},null,512),[[k,s.state.form.name]])])]),t("div",dt,[t("div",ct,[mt,_t,t("ul",ut,[(r(!0),n(f,null,y(l.permissions,(o,d)=>(r(),n("li",{class:"list-group-item",key:d},[t("div",ht,[t("label",pt,[t("b",null,u(d),1)]),t("div",vt,[(r(!0),n(f,null,y(o,(m,v)=>(r(),n("label",{key:v,class:"col-3"},[p(t("input",{type:"checkbox",name:"permission[]",class:"name","onUpdate:modelValue":e[2]||(e[2]=b=>s.state.form.permission=b),value:m.id},null,8,bt),[[N,s.state.form.permission]]),t("b",null,u(m.extracted),1)]))),128))])])]))),128))])])]),gt])],32)])])])])}const yt=w(K,[["render",ft]]),$t={layout:"Vertical",props:["permissions"],setup(){let a=D();const e=S({form:{},errors:"",editdata:F(()=>a.state.editData)});let l=async()=>{var i=V(e.form);i.patch(route("roles.update",{role:e.form.id})),$("#editmodal").modal("toggle"),s()},s=()=>{a.commit("clearEditData")},h=async i=>{try{var o=await axios({url:route("roles.ajax.permissions",{id:i}),method:"GET"});o.data.rolePermissions!==null&&(e.form.permission=o.data.rolePermissions)}catch(d){d.response?e.errors=d.response.data.message:e.errors="Something Went Wrong"}};return U(()=>e.editdata,i=>{i!==null&&(e.form=i,h(i.id))}),{state:e,updateFun:l,clearData:s}}},wt={class:"modal fade text-left",id:"editmodal",tabindex:"-1",role:"dialog","aria-labelledby":"myModalLabel17","aria-hidden":"true"},St={class:"modal-dialog modal-dialog-centered modal-lg",role:"document"},xt={class:"modal-content"},Ft={class:"modal-header"},kt=t("h4",{class:"modal-title",id:"myModalLabel17"},"Update Role",-1),Ct=t("span",{"aria-hidden":"true"},"×",-1),Rt=[Ct],Nt={class:"modal-body"},Vt={class:"row"},Dt={class:"col-12"},Mt={class:"form-group"},Et=t("label",null,"Role Name",-1),Lt={class:"col-12",style:{height:"60vh","overflow-y":"auto"}},Ut={class:"form-group"},Pt=t("strong",null,"Permission:",-1),Tt=t("br",null,null,-1),jt={class:"list-group"},At={class:"row"},Bt={class:"col-3"},Wt={class:"col-9 row"},qt=["value"],Ot=t("div",{class:"col-12 mt-1"},[t("button",{type:"submit",class:"btn btn-primary mr-1"}," Save ")],-1);function zt(a,e,l,s,h,i){return r(),n("div",wt,[t("div",St,[t("div",xt,[t("div",Ft,[kt,t("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close",onClick:e[0]||(e[0]=o=>s.clearData())},Rt)]),t("div",Nt,[t("form",{class:"form form-vertical",onSubmit:e[3]||(e[3]=C(o=>s.updateFun(),["prevent"]))},[t("div",Vt,[t("div",Dt,[t("div",Mt,[Et,p(t("input",{type:"text",class:"form-control",placeholder:"Name","onUpdate:modelValue":e[1]||(e[1]=o=>s.state.form.name=o),required:""},null,512),[[k,s.state.form.name]])])]),t("div",Lt,[t("div",Ut,[Pt,Tt,t("ul",jt,[(r(!0),n(f,null,y(l.permissions,(o,d)=>(r(),n("li",{class:"list-group-item",key:d},[t("div",At,[t("label",Bt,u(d),1),t("div",Wt,[(r(!0),n(f,null,y(o,(m,v)=>(r(),n("label",{key:v,class:"col-3"},[p(t("input",{type:"checkbox",name:"permission[]",class:"name","onUpdate:modelValue":e[2]||(e[2]=b=>s.state.form.permission=b),value:m.id},null,8,qt),[[N,s.state.form.permission]]),P(" "+u(m.extracted),1)]))),128))])])]))),128))])])]),Ot])],32)])])])])}const Gt=w($t,[["render",zt]]),Yt={layout:E,components:{RolesSearch:J,RolesCreate:yt,RolesEdit:Gt},props:["roles","permissions"],setup(){const a=D(),e=S({displaySearch:F(()=>a.state.displaysearch),searchState:F(()=>a.state.SuccesssearchState)});return{getFun:()=>{x.get("/admin/roles")},editFun:o=>{a.commit("editDataState",o)},toggleSearchForm:()=>{a.commit("toggleSearch")},deleteFun:o=>{var d=confirm("Are you sure You Want to Delete This Record?");d==!0&&x.delete(route("roles.destroy",o))},state:e}}},Ht={class:"content-wrapper"},It=A('<div class="content-header row"><div class="content-header-left col-md-9 col-12 mb-2"><div class="row breadcrumbs-top"><div class="col-12"><h2 class="content-header-title float-left mb-0"> Roles </h2><div class="breadcrumb-wrapper"><ol class="breadcrumb"><li class="breadcrumb-item"></li><li class="breadcrumb-item active">Roles</li></ol></div></div></div></div></div>',1),Jt={class:"content-body"},Kt={class:"row",id:"basic-table"},Qt={class:"col-12"},Xt={class:"card"},Zt={class:"card-header py-1"},te=t("h4",{class:"card-title"},"Roles",-1),ee={class:"float-right"},se={type:"button",class:"btn btn-outline-primary float-right btn-sm","data-toggle":"modal","data-target":"#large"},oe={class:"table-responsive table-hover table-striped"},ae={class:"table"},le=t("thead",null,[t("tr",null,[t("th",null,"#"),t("th",null,"Name"),t("th",null,"Actions")])],-1),re={class:"dropdown"},ne={type:"button",class:"btn btn-sm dropdown-toggle hide-arrow","data-toggle":"dropdown"},ie={class:"dropdown-menu"},de=["onClick"],ce=t("span",null,"Edit",-1),me=["onClick"],_e=t("span",null,"Delete",-1),ue={class:"mx-2 mt-3"},he={slot:"prev-nav"},pe={slot:"next-nav"};function ve(a,e,l,s,h,i){const o=g("feather"),d=g("RolesSearch"),m=g("pagination"),v=g("RolesCreate"),b=g("RolesEdit");return r(),n("div",Ht,[It,t("div",Jt,[t("div",Kt,[t("div",Qt,[t("div",Xt,[t("div",Zt,[te,t("div",ee,[t("button",se,[c(o,{type:"plus"})]),t("button",{class:"btn btn-outline-primary float-right mr-1 btn-sm",onClick:e[0]||(e[0]=(..._)=>s.getFun&&s.getFun(..._))},[c(o,{type:"refresh-ccw"})]),t("button",{class:"btn btn-outline-primary float-right mr-1 btn-sm",onClick:e[1]||(e[1]=(..._)=>s.toggleSearchForm&&s.toggleSearchForm(..._))},[c(o,{type:"search"})])])]),p(t("div",null,[c(d)],512),[[T,s.state.displaySearch]]),t("div",oe,[t("table",ae,[le,t("tbody",null,[(r(!0),n(f,null,y(l.roles.data,(_,R)=>(r(),n("tr",{key:R},[t("td",null,u(R+1),1),t("td",null,u(_.name),1),t("td",null,[t("div",re,[t("button",ne,[c(o,{type:"more-vertical"})]),t("div",ie,[t("a",{class:"dropdown-item bg-light-warning",href:"javascript:void(0);","data-toggle":"modal","data-target":"#editmodal",onClick:M=>s.editFun(_)},[c(o,{type:"edit-2",class:"mr-50"}),ce],8,de),t("a",{class:"dropdown-item bg-light-danger",href:"javascript:void(0);",onClick:M=>s.deleteFun(_.id)},[c(o,{type:"trash",class:"mr-50"}),_e],8,me)])])])]))),128))])]),t("div",ue,[c(m,{data:l.roles,limit:1},{default:j(()=>[t("span",he,[c(o,{type:"arrow-left"})]),t("span",pe,[c(o,{type:"arrow-right"})])]),_:1},8,["data"])])])])])])]),c(v,{permissions:l.permissions},null,8,["permissions"]),c(b,{permissions:l.permissions},null,8,["permissions"])])}const fe=w(Yt,[["render",ve]]);export{fe as default};
